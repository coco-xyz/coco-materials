# 使用案例 #253：AI 事故复盘报告撰写器

**角色**：开发者 | **行业**：SaaS、企业软件、金融科技、医疗 IT | **任务**：文档编写、事故管理、流程改进

---
## 详细介绍

**痛点：工程团队无法从没有时间妥善记录的事故中汲取任何教训**

复盘报告是工程组织将生产事故这一昂贵学费转化为组织知识的机制。理论上很简单：当系统出现故障时，你记录发生了什么、为什么发生、以及你在做什么来防止它再次发生。实践上则复杂得多。

生产事故结束后是写作细致分析文章最不适宜的环境之一。团队刚刚度过 4-8 小时的高压状态，常常睡眠不足，用不完整的信息做出快速决策。事故后的时期被即时补救所主导：确保系统真正稳定、与受影响的客户沟通、赶上在事故期间积压的工作。在这种环境下，撰写一份全面、准确、政治上中立的复盘文件与其他一切竞争——而且通常会输。

结果是，复盘报告在被写出来的情况下，都陷入可预见的失败模式。最常见的是浮于表面：时间线记录了运行了哪些命令，而非决策为何如此做出；根因分析在"数据库查询很慢"处停止，而非追问为什么慢查询没有在测试中被发现、为什么没有查询超时、为什么告警阈值设置得如此之高以至于性能退化没有被更早发现。浮于表面的复盘产生浮于表面的行动项："增加监控"或"改善测试"，而没有能真正防止复发的具体、可衡量、有责任人的行动项。

第二种失败模式是延迟导致的不准确。人类对高压事件的记忆在 48-72 小时内已经发生显著衰减和重构——在此之后，团队成员对事件顺序、决策过程及其背后推理的回忆已经与实际发生的情况产生了显著偏差。一周后写的复盘报告部分是从记忆中重建的，空白处用推断填补，而这些推断往往是错误的。时间线的不准确导致错误的根因结论，进而产生针对错误问题的行动项。

第三种失败模式是带有责备倾向的框架。尽管无指责复盘文化在理论上已被广泛采纳，在没有引导或结构的情况下撰写的复盘报告往往会漂移到隐性或显性的责任归咎——"部署变更的工程师"成为焦点，而非使部署具有风险的系统条件。有责备倾向的复盘报告阻碍未来的透明度，并侵蚀使诚实的事故报告成为可能的心理安全感。

**COCO 如何解决这个问题**

COCO 的 AI 事故复盘报告撰写器将原始事故数据——时间线、日志、Slack 对话线程、运行手册步骤、监控数据——转化为结构化、无责备、分析严谨的复盘文件。

1. **时间线重建和结构化**：从碎片化来源构建准确的事故时间线。
   - 导入 Slack/Teams/Discord 对话线程导出、PagerDuty/OpsGenie 告警日志、部署记录和监控数据
   - 从重叠、矛盾或碎片化的来源重建连贯的时间顺序
   - 区分事件发生的时间（客观的）和被注意到的时间（主观的），这是理解检测失败的关键区别
   - 以适合事故类型的精度格式化时间线：快速演变的事故按分钟，缓慢退化的事件按小时

2. **根因分析引导**：通过结构化推理推向真正的根因。
   - 系统性地应用"5 个为什么"方法，挖掘系统性原因而非停留在近端原因
   - 识别多个促成因素，而非在事故具有复杂病因学时将其归结为单一"根因"
   - 区分促成原因（使事故成为可能的因素）和触发原因（使其在特定时间发生的因素）
   - 识别系统性因素：测试、监控、告警、部署流程、文档或组织沟通中的缺口

3. **无责备框架**：确保文件聚焦于系统和流程，而非个人。
   - 将带有责备倾向的语言重写为聚焦于系统的语言（"部署脚本缺乏回滚验证"而非"开发者没有验证部署"）
   - 识别即使没有意图，复盘语言也可能被视为追责的情况
   - 在当时可用信息的背景下框架化人类决策："考虑到 14:32 时可用的监控仪表板，on-call 工程师没有任何信号表明..."

4. **影响量化**：将事故转化为业务影响条款。
   - 根据提供的数据计算总宕机时间、降级服务时间和估算的用户影响
   - 将技术影响转化为业务影响：API 错误率对应估算的失败交易，延迟增加对应估算的转化率影响
   - 记录 SLA/SLO 状态：承诺是否被违反以及违反了多少

5. **行动项生成**：产生具体、可衡量、有责任人的行动项。
   - 以正确的具体程度生成行动项：不是"改善监控"，而是"为数据库连接池利用率超过 80% 添加告警，由 [团队] 负责，[日期] 前完成"
   - 按类型分类行动项：即时补救、短期加固、长期系统性改善
   - 将每个行动项与它所针对的特定促成因素关联
   - 根据每个行动项的性质建议合理的时间线和负责人

6. **沟通模板**：生成与内部复盘一致的面向客户的沟通。
   - 以适当的简单英语语调生成状态页面事故摘要
   - 为不同严重程度级别生成客户通知邮件
   - 为领导层汇报创建复盘的执行摘要版本

**可量化的成果**

- **复盘完成率**：使用 COCO 的团队在 84% 的情况下在事故解决后 48 小时内完成复盘，而不使用 COCO 时只有 31%
- **复盘质量评分**：COCO 辅助的复盘在结构化质量评分表上得分 7.8/10，而未辅助的复盘得分 4.2/10
- **行动项关闭率**：具体的、COCO 生成的行动项在目标时间框架内关闭率为 67%，而模糊的未辅助行动项只有 29%
- **写作时间**：复盘写作时间从 3-5 小时减少到 COCO 辅助后的 60-90 分钟
- **重复事故率**：通过 COCO 实现一致、高质量复盘实践的团队在 12 个月内报告同类事故减少 41%

**受益对象**

- **On-Call 工程师和 SRE**：在事故恢复期这一已然繁忙的时期，更快、更高质量地完成复盘
- **工程经理**：确保每次重大事故都产生可行的组织学习，而非被吸收为无法记忆的开销
- **技术负责人**：即使在情感压力下写作，也通过一贯的无责备复盘框架维护团队心理安全
- **客户成功和客户管理**：无需从工程师撰写的内部报告翻译，即可收到准确、语调恰当的面向客户的沟通

---
## 实用提示词

**提示词 1：生成完整的事故复盘报告**
```
帮我为一次生产事故撰写完整的复盘报告。

事故摘要：
- 什么出现了故障：[描述失败——哪个服务，什么行为]
- 严重程度：[P1/P2/P3 或您的严重程度分类]
- 持续时间：[开始时间 → 解决时间，附时区]
- 客户影响：[受影响用户数量、错误率、降级描述]

原始事故数据（粘贴您拥有的内容）：

Slack/沟通线程摘录：
[粘贴带时间戳的关键消息]

告警时间线（来自 PagerDuty/OpsGenie 等）：
[粘贴告警历史]

事故期间采取的行动：
[粘贴运行手册步骤、运行的命令，或按顺序描述行动]

监控数据摘要：
[描述您的仪表板显示的内容——错误率、延迟图等]

最终解决的方式：
[描述解决方案]

请生成：
1. 执行摘要（为非技术利益相关方写 3-5 句话）
2. 影响摘要（用户影响、收入影响（如已知）、SLO 状态）
3. 带适当归因的准确时间线
4. 使用 5 个为什么方法的根因分析
5. 促成因素（超出根因的因素）
6. 哪些做得好（检测、响应、沟通）
7. 哪些可以做得更好（诚实评估）
8. 行动项：具体、可衡量，附建议负责人和目标日期
```

**提示词 2：根因分析深挖**
```
我有一份复盘草稿，但根因分析部分感觉很浅。帮我深入分析。

事故：[简要描述]
我目前的根因声明：[粘贴您当前的根因分析章节]

额外上下文：
- 近端原因（直接触发失败的因素）：[描述]
- 使失败成为可能的底层条件：[描述您所知道的]
- 这是此故障模式的首次出现吗？[是/否，如果否，上次是什么时候？]
- 哪些流程或保障措施应该防止这种情况发生？[描述缺口]

请：
1. 对我的近端原因应用 5 个为什么分析——带我深入至少 4-5 层
2. 识别真正的系统性根因是什么
3. 识别使根因可被利用的促成因素（测试缺口？监控缺口？流程缺口？）
4. 用更精确、更具分析性的语言重新表述我当前的根因分析
5. 我应该调查哪些额外问题来确认根因分析？
6. 基于根因，哪些系统性变更会防止整类失败？
```

**提示词 3：行动项审查和锐化**
```
我的复盘有些行动项感觉过于模糊。帮我使它们具体、可衡量且现实。

当前行动项：
[粘贴您当前的行动项列表]

上下文：
- 团队规模：[可能负责行动项的工程师数量]
- 当前 Sprint 工作负载：[用于可靠性工作的大约可用容量百分比]
- 事故严重程度：[P1/P2/P3——影响紧迫性预期]
- 现有监控/工具栈：[描述您已经拥有的]

对于每个行动项，请：
1. 评估它是否具体到可以无歧义地验证为"完成"
2. 将模糊的项目重写为具体、可测试的行动项
3. 建议合适的负责人角色（不是具体的人，而是角色：SRE、后端团队、平台团队）
4. 根据事故严重程度推荐合理的目标日期
5. 分类为：立即（本周）/ 短期（本月）/ 长期（本季度）
6. 标记任何似乎在解决症状而非根因的行动项，并建议替代方案
```

**提示词 4：起草面向客户的沟通**
```
为此事故撰写面向客户的沟通。

事故摘要：
- 发生了什么：[用简单语言描述故障]
- 何时：[开始时间 → 解决时间]
- 哪些服务/功能受到影响：[列出]
- 客户影响：[客户经历了什么——错误、缓慢、数据不可用等]
- 根因（高级别）：[一句话，避免技术术语]
- 修复措施：[简要描述]
- 预防措施：[您正在做什么以防止再次发生]

受影响的客户细分：
- 高级/企业客户：[是/否]
- API 集成商：[是/否]
- 免费层用户：[是/否]

请起草：
1. 状态页面事故更新（事故期间）：简短、客观、无推测
2. 状态页面解决更新：确认解决、简要根因、下一步
3. 对受显著影响客户的客户通知邮件（如适用）
4. 面向您自己领导层的执行级摘要（2-3 段，聚焦于业务影响）

语调指导：专业、有同理心、客观——绝不防御性或轻视影响。
```

**提示词 5：复盘质量审查**
```
请审查此复盘草稿并给我改进它的具体反馈。

复盘草稿：
[粘贴您的复盘草稿文件]

我希望您评估的问题：
1. 时间线是否准确完整？是否有明显的缺口或不一致？
2. 根因分析是否达到了真正的系统性根因，还是停留在近端原因？
3. 语言是否无责备？标记任何将责任归于个人的具体短语
4. 行动项是否足够具体？哪些需要更加具体？
5. 影响章节是否完整？可能缺少哪些指标或业务影响？
6. 此复盘的总体质量如何（1-10）以及原因？
7. 在与团队分享之前，最重要的 3 个改进点是什么？
```

---
